<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<title>Timer</title>
	<script src="https://use.fontawesome.com/ee2b940546.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<link rel="shortcut icon" type="image/png" href="Timer.ico"/>
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="css/style.css">
</head>
<body>

	<div class="container text-center">
		<div class="row justify-content-center">
			<div class="col">
				<div class="row my-4 justify-content-center">
					<div class="col-4">	
						<input type="text" placeholder="UsÃ¡ndolo para..." class="form-control">
					</div>
				</div>
				<div class="row justify-content-center">
					<div class="col-8">		
						<hr>
					</div>
				</div>
				<p id="timer" class="my-4 h3">
				<span id="hour">00</span>:<span id="minutes">00</span>:<span id="seconds">00</span></p>

				<p>Tiempo en segundos:</p>
				<div class="row justify-content-center mb-2">
					<div class="col-3">
						<input type="number" value="900" id="numberInput" class="form-control">
					</div>
				</div>
				<button type="button" id="start" class="mt-1 btn btn-primary btn-lg"><i class="fa fa-play" aria-hidden="true"></i></button>
			</div>
		</div>

	</div>

	<!-- SCRIPTS -->

	<script>
		var active = false;
		var timeInSeconds = 0;
		var hour = 0;
		var minutes = 0;
		var seconds = 0;
		var sound = new Audio('https://aaleexom.github.io/sounds/timer.mp3');
		sound.volume = 0.75;

		$("#start").click(function (){
			if (active == false){
				timeInSeconds = $("#numberInput").val();
				active = true;
				$("#start").html("<i class=\"fa fa-pause\" aria-hidden=\"true\"></i>");
			} else {
				active = false;
				$("#start").html("<i class=\"fa fa-play\" aria-hidden=\"true\"></i>");
				$("#hour").text("00");
				$("#minutes").text("00");
				$("#seconds").text("00");
				timeInSeconds = $("#numberInput").val();
			}
			timer();
		});

		function timer(){
			if (timeInSeconds <= 0) {
				sound.play();
				active = false;
				$("#start").html("<i class=\"fa fa-play\" aria-hidden=\"true\"></i>");
				$("#hour").text("00");
				$("#minutes").text("00");
				$("#seconds").text("00");
				timeInSeconds = $("#numberInput").val();
			} else {
					if (active == true){
					if (timeInSeconds > 3600){
						hour = parseInt(timeInSeconds / 3600);
					}
					if (timeInSeconds > 60){
						minutes = parseInt((timeInSeconds - (hour * 3600)) / 60);
					}
					if (timeInSeconds >= 0) {
						seconds = timeInSeconds - ((hour * 3600) + (minutes * 60));
					}

					if (hour.toString().length < 2){
						hour = "0" + hour;
					}
					if (minutes.toString().length < 2){
						minutes = "0" + minutes;
					}
					if (seconds.toString().length < 2){
						seconds = "0" + seconds;
					}

					$("#hour").text(hour);
					$("#minutes").text(minutes);
					$("#seconds").text(seconds);
					timeInSeconds--;
					setTimeout(timer, 1000);
				}
			}
		}
		
	</script>
	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
	<script src="js/bootstrap.min.js"></script>
</body>
</html>